{% extends 'base.html' %}


{% block content %}
  <div class="my_products"><h4>Мои <span class="text-blue">продукты</span></h4></div>
  <div class="main-products">
  <div class="main-products-grid">
    {% for product in products %}
      <a href="{% url 'product_detail' productid=product.productid %}" class="product-link">
        <div class="product-card">
          <img src="{{ product.image.url }}" alt="{{ product.productname }}" width="200">
          <p class="name-product">{{ product.productname }}</p>
          <p class="price-product">{{ product.price|floatformat:1 }}₽/шт.</p>
          <p><span class="title-product">В наличии:</span> {{ product.quantity }} шт.</p>
          <p><span class="title-product">Окончание срока годности:</span><br>{{ product.expirydate }}</p>
          <p><span class="title-product">Склад:</span> {{ product.warehouseid }}</p>
            <form method="post" action="{% url 'delete_product' product.productid %}">
                {% csrf_token %}
                <button type="submit" class="delete-button">Удалить</button>
            </form>
        </div>
      </a>
    {% endfor %}
  </div>
      <hr style="margin: 40px 0;">

<div class="add-product-form">
  <h3>Добавить новый <span class="text-blue">продукт</span></h3>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label>Название продукта:</label>
    <input type="text" name="productname" required>

    <label>Категория:</label>
    <input type="number" name="categoryid">

    <label>Количество:</label>
    <input type="number" name="quantity">

    <label>Срок годности:</label>
    <input type="date" name="expirydate">

    <label>Цена:</label>
    <input type="number" step="0.01" name="price">

    <label>Дата поступления:</label>
    <input type="datetime-local" name="datereceived">

    <label>Склад:</label>
    <select name="warehouseid">
        <option value="">-- не выбран --</option>
        {% for warehouse in warehouses %}
            <option value="{{ warehouse.pk }}">{{ warehouse }}</option>
        {% endfor %}
    </select>

    <label>Изображение:</label>
    <input type="file" name="image">

    <button type="submit" class="submit-button">Добавить товар</button>
  </form>
</div>
</div>
{% endblock %}